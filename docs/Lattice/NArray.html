<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.34.0">
<meta name="crystal_docs.project_version" content="main-dev">
<meta name="crystal_docs.project_name" content="lattice">


<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="lattice">
  <title>Lattice::NArray(T) - lattice main-dev</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "../";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="../index.html">
          lattice
        </a>
      </h1>

      <span class="project-version">
        main-dev
      </span>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent open current" data-id="lattice/Lattice" data-name="lattice">
      <a href="../Lattice.html">Lattice</a>
      
        <ul>
  
  <li class=" " data-id="lattice/Lattice/AbstractNArray" data-name="lattice::abstractnarray(t)">
      <a href="../Lattice/AbstractNArray.html">AbstractNArray</a>
      
    </li>
  
  <li class=" " data-id="lattice/Lattice/DimensionError" data-name="lattice::dimensionerror">
      <a href="../Lattice/DimensionError.html">DimensionError</a>
      
    </li>
  
  <li class=" current" data-id="lattice/Lattice/NArray" data-name="lattice::narray(t)">
      <a href="../Lattice/NArray.html">NArray</a>
      
    </li>
  
  <li class=" " data-id="lattice/Lattice/NArrayFormatter" data-name="lattice::narrayformatter">
      <a href="../Lattice/NArrayFormatter.html">NArrayFormatter</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">class</span> Lattice::NArray(T)

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../Lattice/NArray.html">Lattice::NArray(T)</a></li><li class="superclass"><a href="../Lattice/AbstractNArray.html">Lattice::AbstractNArray(T)</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>




  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>An <code><a href="../Lattice/NArray.html">NArray</a></code> is a multidimensional array for any arbitrary type.
It is the most general implementation of AbstractNArray, and as a result
only implements primitive data operations (construction, data reading,
data writing, and region sampling / slicing).</p>

<p><code><a href="../Lattice/NArray.html">NArray</a></code> is designed to provide the best user experience possible, and
that methodology led to the use of the <code><a href="../Lattice/NArray.html#method_missing(call)-macro">method_missing</a></code> macro for element-wise
operations. Please read its documentation, as it provides a large amount
of functionality that may otherwise appear missing.</p>





  <h2>
    <a id="included-modules" class="anchor" href="#included-modules">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Included Modules
  </h2>
  <ul class="other-types-list">
    
      <li class="other-type">Enumerable(T)</li>
    
  </ul>










  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  





  <h2>
    <a id="constructors" class="anchor" href="#constructors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructors
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new(shape,&)-class-method" class="signature"><strong>.new</strong>(shape, &)</a>
        
          <div class="summary"><p>Creates an <code><a href="../Lattice/NArray.html">NArray</a></code> using only a shape (see <code><a href="../Lattice/NArray.html#shape:Array(Int32)-instance-method">#shape</a></code>) and a packed index.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#new(nested_array)-class-method" class="signature"><strong>.new</strong>(nested_array)</a>
        
      </li>
    
  </ul>



  <h2>
    <a id="class-method-summary" class="anchor" href="#class-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#build(shape,&block:Array(Int32),Int32-%3ET):NArray(T)-class-method" class="signature"><strong>.build</strong>(shape, &block : Array(Int32), Int32 -> T) : NArray(T)</a>
        
          <div class="summary"><p>Constructs an <code><a href="../Lattice/NArray.html">NArray</a></code> using a user-provided <em>shape</em> (see <code><a href="../Lattice/NArray.html#shape:Array(Int32)-instance-method">#shape</a></code>) and a callback.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#common_container(*objects)-class-method" class="signature"><strong>.common_container</strong>(*objects)</a>
        
          <div class="summary"><p>Given a list of <code><a href="../Lattice/NArray.html">NArray</a></code>s, returns the smallest shape array in which any one of those <code>NArrays</code> can be contained.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#fill(shape,value:T)-class-method" class="signature"><strong>.fill</strong>(shape, value : T)</a>
        
          <div class="summary"><p>Fill an array of given size with a given value.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#pack_index(indices,shape):Int32-class-method" class="signature"><strong>.pack_index</strong>(indices, shape) : Int32</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#unpack_index(index,shape):Array(Int32)-class-method" class="signature"><strong>.unpack_index</strong>(index, shape) : Array(Int32)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#valid_index?(indices,shape)-class-method" class="signature"><strong>.valid_index?</strong>(indices, shape)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#wrap(*objects:NArray(T),pad=false):NArray(T)-class-method" class="signature"><strong>.wrap</strong>(*objects : NArray(T), pad = <span class="n">false</span>) : NArray(T)</a>
        
          <div class="summary"><p>Adds a dimension at highest level, where each "row" is an input NArray.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#wrap(*objects)-class-method" class="signature"><strong>.wrap</strong>(*objects)</a>
        
          <div class="summary"><p>creates an NArray-type vector from a tuple of scalars.</p></div>
        
      </li>
    
  </ul>



  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#[](*coord):NArray(T)-instance-method" class="signature"><strong>#[]</strong>(*coord) : NArray(T)</a>
        
          <div class="summary"><p>Higher-order slicing operations (like slicing in numpy)</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#[](index):NArray(T)-instance-method" class="signature"><strong>#[]</strong>(index) : NArray(T)</a>
        
          <div class="summary"><p>Takes a single index into the NArray, returning a slice of the largest dimension possible.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#[]=(bool_mask:NArray(Bool),value:T)-instance-method" class="signature"><strong>#[]=</strong>(bool_mask : NArray(Bool), value : T)</a>
        
          <div class="summary"><p>replaces all values in a boolean mask with a given value</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#[]=(*args:*U)forallU-instance-method" class="signature"><strong>#[]=</strong>(*args : <span class="o">*</span><span class="t">U</span>) forall U</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#buffer:Slice(T)-instance-method" class="signature"><strong>#buffer</strong> : Slice(T)</a>
        
          <div class="summary"><p>Stores the elements of an <code><a href="../Lattice/NArray.html">NArray</a></code> in lexicographic (row-major) order.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#canonicalize_index(index,axis)-instance-method" class="signature"><strong>#canonicalize_index</strong>(index, axis)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#canonicalize_range(range,axis):Tuple(Range(Int32,Int32),Int32)-instance-method" class="signature"><strong>#canonicalize_range</strong>(range, axis) : Tuple(Range(Int32, Int32), Int32)</a>
        
          <div class="summary"><p>Given a range in some dimension (typically the domain to slice in), returns a canonical form where both indexes are positive and the range is strictly inclusive of its bounds.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#clone:NArray(T)-instance-method" class="signature"><strong>#clone</strong> : NArray(T)</a>
        
          <div class="summary"><p>Creates a deep copy of this NArray; Allocates a new buffer of the same shape, and calls #clone on every item in the buffer.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#dimensions:Int32-instance-method" class="signature"><strong>#dimensions</strong> : Int32</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#dup:NArray(T)-instance-method" class="signature"><strong>#dup</strong> : NArray(T)</a>
        
          <div class="summary"><p>Creates a shallow copy of this NArray; Allocates a new buffer of the same shape, and duplicates every item in the buffer.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#each(&block:T-%3E)-instance-method" class="signature"><strong>#each</strong>(&block : T -> )</a>
        
          <div class="summary"><p>Must yield this collection's elements to the block.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#each_with_index(&block:T,Int32-%3E)-instance-method" class="signature"><strong>#each_with_index</strong>(&block : T, Int32 -> )</a>
        
          <div class="summary"><p>Iterates over the collection, yielding both the elements and their index.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#each_with_indices(&block:T,Array(Int32),Int32-%3E)-instance-method" class="signature"><strong>#each_with_indices</strong>(&block : T, Array(Int32), Int32 -> )</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#extract_buffer_indices(coord):Tuple(Array(Int32),Array(Int32))-instance-method" class="signature"><strong>#extract_buffer_indices</strong>(coord) : Tuple(Array(Int32), Array(Int32))</a>
        
          <div class="summary"><p>maps an n-dimensional to a list of buffer indices that</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#flatten:NArray(T)-instance-method" class="signature"><strong>#flatten</strong> : NArray(T)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#get(*coord):T-instance-method" class="signature"><strong>#get</strong>(*coord) : T</a>
        
          <div class="summary"><p>Given a fully-qualified coordinate, returns the scalar at that position.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#get_buffer_idx(index):T-instance-method" class="signature"><strong>#get_buffer_idx</strong>(index) : T</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#map(&block:T-%3EU)forallU-instance-method" class="signature"><strong>#map</strong>(&block : T -> U) forall U</a>
        
          <div class="summary"><p>Returns an <code>Array</code> with the results of running the block against each element of the collection.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#map!(&block:T-%3EU)forallU-instance-method" class="signature"><strong>#map!</strong>(&block : T -> U) forall U</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#map_with_index(&block:T,Int32-%3EU)forallU-instance-method" class="signature"><strong>#map_with_index</strong>(&block : T, Int32 -> U) forall U</a>
        
          <div class="summary"><p>Like <code><a href="../Lattice/NArray.html#map(&block:T-%3EU)forallU-instance-method">#map</a></code>, but the block gets passed both the element and its index.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#map_with_index!(&block:T,Int32-%3ET)forallT-instance-method" class="signature"><strong>#map_with_index!</strong>(&block : T, Int32 -> T) forall T</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#map_with_indices(&block:T,Array(Int32),Int32-%3EU)forallU-instance-method" class="signature"><strong>#map_with_indices</strong>(&block : T, Array(Int32), Int32 -> U) forall U</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#map_with_indices!(&block:T,Array(Int32),Int32-%3EU)forallU-instance-method" class="signature"><strong>#map_with_indices!</strong>(&block : T, Array(Int32), Int32 -> U) forall U</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#pack_index(indices):Int32-instance-method" class="signature"><strong>#pack_index</strong>(indices) : Int32</a>
        
          <div class="summary"><p>Convert from n-dimensional indexing to a buffer location.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#reshape(new_shape)-instance-method" class="signature"><strong>#reshape</strong>(new_shape)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#scalar?-instance-method" class="signature"><strong>#scalar?</strong></a>
        
          <div class="summary"><p>Checks that the array is a 1-vector (a "zero-dimensional" NArray)</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#set(coord,value:T)-instance-method" class="signature"><strong>#set</strong>(coord, value : T)</a>
        
          <div class="summary"><p>replaces all values in an indexed chunk with the given value.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#set(coord,value:NArray(T))-instance-method" class="signature"><strong>#set</strong>(coord, value : NArray(T))</a>
        
          <div class="summary"><p>replaces an indexed chunk with a given chunk of the same shape.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#shape:Array(Int32)-instance-method" class="signature"><strong>#shape</strong> : Array(Int32)</a>
        
          <div class="summary"><p>Returns an array where <code>shape[i]</code> is the size of the NArray in the <code>i</code>th dimension.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#to_a:Array(T)-instance-method" class="signature"><strong>#to_a</strong> : Array(T)</a>
        
          <div class="summary"><p>Returns an <code>Array</code> with all the elements in the collection.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#to_s:String-instance-method" class="signature"><strong>#to_s</strong> : String</a>
        
          <div class="summary"><p>Returns a string representation of this object.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#to_s(io:IO)-instance-method" class="signature"><strong>#to_s</strong>(io : IO)</a>
        
          <div class="summary"><p>Override for printing a string output to stream (e.g., puts)</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#to_scalar:T-instance-method" class="signature"><strong>#to_scalar</strong> : T</a>
        
          <div class="summary"><p>Maps a zero-dimensional NArray to the element it contains.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#to_tensor:Tensor(T)-instance-method" class="signature"><strong>#to_tensor</strong> : Tensor(T)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#unpack_index(index):Array(Int32)-instance-method" class="signature"><strong>#unpack_index</strong>(index) : Array(Int32)</a>
        
          <div class="summary"><p>Convert from a buffer location to an n-dimensional indexing</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#valid_index?(indices)-instance-method" class="signature"><strong>#valid_index?</strong>(indices)</a>
        
          <div class="summary"><p>Checks if a given list of integers represent an index that is in range for this <code><a href="../Lattice/NArray.html">NArray</a></code>.</p></div>
        
      </li>
    
  </ul>



  <h2>
    <a id="macro-summary" class="anchor" href="#macro-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Macro Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#method_missing(call)-macro" class="signature"><strong>method_missing</strong>(call)</a>
        
      </li>
    
  </ul>



<div class="methods-inherited">
  
    


    


    


  
    

  <h3>Instance methods inherited from class <code><a href="../Lattice/AbstractNArray.html">Lattice::AbstractNArray(T)</a></code></h3>
  
  
    <a href="../Lattice/AbstractNArray.html#[](index):AbstractNArray(T)-instance-method" class="tooltip">
      <span>[](index) : AbstractNArray(T)<br/>[](*coord) : AbstractNArray(T)</span>
    []</a>, 
    
  
    <a href="../Lattice/AbstractNArray.html#clone:AbstractNArray(T)-instance-method" class="tooltip">
      <span>clone : AbstractNArray(T)</span>
    clone</a>, 
    
  
    <a href="../Lattice/AbstractNArray.html#dup:AbstractNArray(T)-instance-method" class="tooltip">
      <span>dup : AbstractNArray(T)</span>
    dup</a>, 
    
  
    <a href="../Lattice/AbstractNArray.html#get(*coord):T-instance-method" class="tooltip">
      <span>get(*coord) : T</span>
    get</a>, 
    
  
    <a href="../Lattice/AbstractNArray.html#shape:Array(Int32)-instance-method" class="tooltip">
      <span>shape : Array(Int32)</span>
    shape</a>, 
    
  
    <a href="../Lattice/AbstractNArray.html#to_scalar:T-instance-method" class="tooltip">
      <span>to_scalar : T</span>
    to_scalar</a>
    
  


    


    


  
    


    


    


  
    


    


    


  
</div>


  <h2>
    <a id="constructor-detail" class="anchor" href="#constructor-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructor Detail
  </h2>
  
    <div class="entry-detail" id="new(shape,&)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(shape, &)

        <a class="method-permalink" href="#new(shape,&)-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Creates an <code><a href="../Lattice/NArray.html">NArray</a></code> using only a shape (see <code><a href="../Lattice/NArray.html#shape:Array(Int32)-instance-method">#shape</a></code>) and a packed index.
This is used internally to make code faster - converting from a packed
index to an unpacked index isn't needed for many constructors, and generating
them would waste resources.
For more information, see <code><a href="../Lattice/NArray.html#pack_index(indices):Int32-instance-method">#pack_index</a></code>, <code><a href="../Lattice/NArray.html#buffer:Slice(T)-instance-method">#buffer</a></code>, and <code><a href="../Lattice/NArray.html#build(shape,&block:Array(Int32),Int32-%3ET):NArray(T)-class-method">.build</a></code></p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="new(nested_array)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(nested_array)

        <a class="method-permalink" href="#new(nested_array)-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  



  <h2>
    <a id="class-method-detail" class="anchor" href="#class-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Detail
  </h2>
  
    <div class="entry-detail" id="build(shape,&block:Array(Int32),Int32->T):NArray(T)-class-method">
      <div class="signature">
        
        def self.<strong>build</strong>(shape, &block : Array(Int32), Int32 -> T) : <a href="../Lattice/NArray.html">NArray</a>(T)

        <a class="method-permalink" href="#build(shape,&block:Array(Int32),Int32-%3ET):NArray(T)-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Constructs an <code><a href="../Lattice/NArray.html">NArray</a></code> using a user-provided <em>shape</em> (see <code><a href="../Lattice/NArray.html#shape:Array(Int32)-instance-method">#shape</a></code>) and a callback.
The provided callback should map a multidimensional index (and an optional packed
index) to the value you wish to store at that position.
For example, to create the 2x2 identity matrix:</p>

<pre><code><span class="t">Lattice</span><span class="t">::</span><span class="t">NArray</span>.build([<span class="n">2</span>, <span class="n">2</span>]) <span class="k">do</span> <span class="o">|</span>indices<span class="o">|</span>
  <span class="k">if</span> indices[<span class="n">0</span>] <span class="o">==</span> indices[<span class="n">1</span>]
    <span class="n">1</span>
  <span class="k">else</span>
    <span class="n">0</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre>

<p>Which will create:</p>

<pre><code class="language-text">[[1, 0, 0],
  0, 1, 0],
  0, 0, 1]]</code></pre>

<p>The buffer index allows you to easily index elements in lexicographic order.
For example:</p>

<pre><code><span class="t">NArray</span>.build([<span class="n">5</span>, <span class="n">1</span>]) { <span class="o">|</span>indices, index<span class="o">|</span> index }</code></pre>

<p>Will create:</p>

<pre><code class="language-text">[[0],
 [1],
 [2],
 [3],
 [4]]</code></pre>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="common_container(*objects)-class-method">
      <div class="signature">
        
        def self.<strong>common_container</strong>(*objects)

        <a class="method-permalink" href="#common_container(*objects)-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Given a list of <code><a href="../Lattice/NArray.html">NArray</a></code>s, returns the smallest shape array in which any one of those <code>NArrays</code> can be contained.</p>

<p><span class="flag orange">TODO</span>  Example</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="fill(shape,value:T)-class-method">
      <div class="signature">
        
        def self.<strong>fill</strong>(shape, value : T)

        <a class="method-permalink" href="#fill(shape,value:T)-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Fill an array of given size with a given value. Note that if value is an <code>Object</code>, only its reference will be copied</p>

<ul><li>all elements would refer to a single object.</li></ul>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="pack_index(indices,shape):Int32-class-method">
      <div class="signature">
        
        def self.<strong>pack_index</strong>(indices, shape) : Int32

        <a class="method-permalink" href="#pack_index(indices,shape):Int32-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="unpack_index(index,shape):Array(Int32)-class-method">
      <div class="signature">
        
        def self.<strong>unpack_index</strong>(index, shape) : Array(Int32)

        <a class="method-permalink" href="#unpack_index(index,shape):Array(Int32)-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="valid_index?(indices,shape)-class-method">
      <div class="signature">
        
        def self.<strong>valid_index?</strong>(indices, shape)

        <a class="method-permalink" href="#valid_index?(indices,shape)-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="wrap(*objects:NArray(T),pad=false):NArray(T)-class-method">
      <div class="signature">
        
        def self.<strong>wrap</strong>(*objects : <a href="../Lattice/NArray.html">NArray</a>(T), pad = <span class="n">false</span>) : <a href="../Lattice/NArray.html">NArray</a>(T)

        <a class="method-permalink" href="#wrap(*objects:NArray(T),pad=false):NArray(T)-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Adds a dimension at highest level, where each "row" is an input NArray.
If pad is false, then throw error if shapes of objects do not match;
otherwise, pad subarrays along each axis to match whichever is largest in that axis</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="wrap(*objects)-class-method">
      <div class="signature">
        
        def self.<strong>wrap</strong>(*objects)

        <a class="method-permalink" href="#wrap(*objects)-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>creates an NArray-type vector from a tuple of scalars.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  



  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="[](*coord):NArray(T)-instance-method">
      <div class="signature">
        
        def <strong>[]</strong>(*coord) : <a href="../Lattice/NArray.html">NArray</a>(T)

        <a class="method-permalink" href="#[](*coord):NArray(T)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Higher-order slicing operations (like slicing in numpy)</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="[](index):NArray(T)-instance-method">
      <div class="signature">
        
        def <strong>[]</strong>(index) : <a href="../Lattice/NArray.html">NArray</a>(T)

        <a class="method-permalink" href="#[](index):NArray(T)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Takes a single index into the NArray, returning a slice of the largest dimension possible.
For example, if <code>a</code> is a matrix, <code>a[0]</code> will be a vector. There is a special case when
indexing into a 1D <code><a href="../Lattice/NArray.html">NArray</a></code> - the scalar at the index provided will be wrapped in an
<code><a href="../Lattice/NArray.html">NArray</a></code>. This is to preserve type-safety - if you want to extract the scalar as type <code>T</code>,
invoke <code><a href="../Lattice/NArray.html#to_scalar:T-instance-method">#to_scalar</a></code>.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="[]=(bool_mask:NArray(Bool),value:T)-instance-method">
      <div class="signature">
        
        def <strong>[]=</strong>(bool_mask : <a href="../Lattice/NArray.html">NArray</a>(Bool), value : T)

        <a class="method-permalink" href="#[]=(bool_mask:NArray(Bool),value:T)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>replaces all values in a boolean mask with a given value</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="[]=(*args:*U)forallU-instance-method">
      <div class="signature">
        
        def <strong>[]=</strong>(*args : <span class="o">*</span><span class="t">U</span>) forall U

        <a class="method-permalink" href="#[]=(*args:*U)forallU-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="buffer:Slice(T)-instance-method">
      <div class="signature">
        
        def <strong>buffer</strong> : Slice(T)

        <a class="method-permalink" href="#buffer:Slice(T)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Stores the elements of an <code><a href="../Lattice/NArray.html">NArray</a></code> in lexicographic (row-major) order.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="canonicalize_index(index,axis)-instance-method">
      <div class="signature">
        
        def <strong>canonicalize_index</strong>(index, axis)

        <a class="method-permalink" href="#canonicalize_index(index,axis)-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="canonicalize_range(range,axis):Tuple(Range(Int32,Int32),Int32)-instance-method">
      <div class="signature">
        
        def <strong>canonicalize_range</strong>(range, axis) : Tuple(Range(Int32, Int32), Int32)

        <a class="method-permalink" href="#canonicalize_range(range,axis):Tuple(Range(Int32,Int32),Int32)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Given a range in some dimension (typically the domain to slice in), returns a canonical
form where both indexes are positive and the range is strictly inclusive of its bounds.
This method also returns a direction parameter, which is 1 iff <code>begin</code> &lt; <code>end</code> and
-1 iff <code>end</code> &lt; <code>begin</code></p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="clone:NArray(T)-instance-method">
      <div class="signature">
        
        def <strong>clone</strong> : <a href="../Lattice/NArray.html">NArray</a>(T)

        <a class="method-permalink" href="#clone:NArray(T)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Creates a deep copy of this NArray;
Allocates a new buffer of the same shape, and calls #clone on every item in the buffer.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="dimensions:Int32-instance-method">
      <div class="signature">
        
        def <strong>dimensions</strong> : Int32

        <a class="method-permalink" href="#dimensions:Int32-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="dup:NArray(T)-instance-method">
      <div class="signature">
        
        def <strong>dup</strong> : <a href="../Lattice/NArray.html">NArray</a>(T)

        <a class="method-permalink" href="#dup:NArray(T)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Creates a shallow copy of this NArray;
Allocates a new buffer of the same shape, and duplicates every item in the buffer.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="each(&block:T->)-instance-method">
      <div class="signature">
        
        def <strong>each</strong>(&block : T -> )

        <a class="method-permalink" href="#each(&block:T-%3E)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
            <div class="doc-inherited">
              Description copied from module Enumerable(T)
            </div>
          
          <p>Must yield this collection's elements to the block.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="each_with_index(&block:T,Int32->)-instance-method">
      <div class="signature">
        
        def <strong>each_with_index</strong>(&block : T, Int32 -> )

        <a class="method-permalink" href="#each_with_index(&block:T,Int32-%3E)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
            <div class="doc-inherited">
              Description copied from module Enumerable(T)
            </div>
          
          <p>Iterates over the collection, yielding both the elements and their index.</p>

<pre><code>[<span class="s">&quot;Alice&quot;</span>, <span class="s">&quot;Bob&quot;</span>].each_with_index <span class="k">do</span> <span class="o">|</span>user, i<span class="o">|</span>
  puts <span class="s">&quot;User #</span><span class="i">#{</span>i<span class="i">}</span><span class="s">: </span><span class="i">#{</span>user<span class="i">}</span><span class="s">&quot;</span>
<span class="k">end</span></code></pre>

<p>Prints:</p>

<pre><code class="language-text">User # 0: Alice
User # 1: Bob</code></pre>

<p>Accepts an optional <em>offset</em> parameter, which tells it to start counting
from there. So, a more human friendly version of the previous snippet would be:</p>

<pre><code>[<span class="s">&quot;Alice&quot;</span>, <span class="s">&quot;Bob&quot;</span>].each_with_index(<span class="n">1</span>) <span class="k">do</span> <span class="o">|</span>user, i<span class="o">|</span>
  puts <span class="s">&quot;User #</span><span class="i">#{</span>i<span class="i">}</span><span class="s">: </span><span class="i">#{</span>user<span class="i">}</span><span class="s">&quot;</span>
<span class="k">end</span></code></pre>

<p>Which would print:</p>

<pre><code class="language-text">User # 1: Alice
User # 2: Bob</code></pre>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="each_with_indices(&block:T,Array(Int32),Int32->)-instance-method">
      <div class="signature">
        
        def <strong>each_with_indices</strong>(&block : T, Array(Int32), Int32 -> )

        <a class="method-permalink" href="#each_with_indices(&block:T,Array(Int32),Int32-%3E)-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="extract_buffer_indices(coord):Tuple(Array(Int32),Array(Int32))-instance-method">
      <div class="signature">
        
        def <strong>extract_buffer_indices</strong>(coord) : Tuple(Array(Int32), Array(Int32))

        <a class="method-permalink" href="#extract_buffer_indices(coord):Tuple(Array(Int32),Array(Int32))-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>maps an n-dimensional
to a list of buffer indices that</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="flatten:NArray(T)-instance-method">
      <div class="signature">
        
        def <strong>flatten</strong> : <a href="../Lattice/NArray.html">NArray</a>(T)

        <a class="method-permalink" href="#flatten:NArray(T)-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="get(*coord):T-instance-method">
      <div class="signature">
        
        def <strong>get</strong>(*coord) : T

        <a class="method-permalink" href="#get(*coord):T-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Given a fully-qualified coordinate, returns the scalar at that position.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="get_buffer_idx(index):T-instance-method">
      <div class="signature">
        
        def <strong>get_buffer_idx</strong>(index) : T

        <a class="method-permalink" href="#get_buffer_idx(index):T-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="map(&block:T->U)forallU-instance-method">
      <div class="signature">
        
        def <strong>map</strong>(&block : T -> U) forall U

        <a class="method-permalink" href="#map(&block:T-%3EU)forallU-instance-method">#</a>
      </div>
      
        <div class="doc">
          
            <div class="doc-inherited">
              Description copied from module Enumerable(T)
            </div>
          
          <p>Returns an <code>Array</code> with the results of running the block against each element of the collection.</p>

<pre><code>[<span class="n">1</span>, <span class="n">2</span>, <span class="n">3</span>].map { <span class="o">|</span>i<span class="o">|</span> i <span class="o">*</span> <span class="n">10</span> } <span class="c"># =&gt; [10, 20, 30]</span></code></pre>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="map!(&block:T->U)forallU-instance-method">
      <div class="signature">
        
        def <strong>map!</strong>(&block : T -> U) forall U

        <a class="method-permalink" href="#map!(&block:T-%3EU)forallU-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="map_with_index(&block:T,Int32->U)forallU-instance-method">
      <div class="signature">
        
        def <strong>map_with_index</strong>(&block : T, Int32 -> U) forall U

        <a class="method-permalink" href="#map_with_index(&block:T,Int32-%3EU)forallU-instance-method">#</a>
      </div>
      
        <div class="doc">
          
            <div class="doc-inherited">
              Description copied from module Enumerable(T)
            </div>
          
          <p>Like <code><a href="../Lattice/NArray.html#map(&block:T-%3EU)forallU-instance-method">#map</a></code>, but the block gets passed both the element and its index.</p>

<pre><code>[<span class="s">&quot;Alice&quot;</span>, <span class="s">&quot;Bob&quot;</span>].map_with_index { <span class="o">|</span>name, i<span class="o">|</span> <span class="s">&quot;User #</span><span class="i">#{</span>i<span class="i">}</span><span class="s">: </span><span class="i">#{</span>name<span class="i">}</span><span class="s">&quot;</span> }
<span class="c"># =&gt; [&quot;User #0: Alice&quot;, &quot;User #1: Bob&quot;]</span></code></pre>

<p>Accepts an optional <em>offset</em> parameter, which tells it to start counting
from there.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="map_with_index!(&block:T,Int32->T)forallT-instance-method">
      <div class="signature">
        
        def <strong>map_with_index!</strong>(&block : T, Int32 -> T) forall T

        <a class="method-permalink" href="#map_with_index!(&block:T,Int32-%3ET)forallT-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="map_with_indices(&block:T,Array(Int32),Int32->U)forallU-instance-method">
      <div class="signature">
        
        def <strong>map_with_indices</strong>(&block : T, Array(Int32), Int32 -> U) forall U

        <a class="method-permalink" href="#map_with_indices(&block:T,Array(Int32),Int32-%3EU)forallU-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="map_with_indices!(&block:T,Array(Int32),Int32->U)forallU-instance-method">
      <div class="signature">
        
        def <strong>map_with_indices!</strong>(&block : T, Array(Int32), Int32 -> U) forall U

        <a class="method-permalink" href="#map_with_indices!(&block:T,Array(Int32),Int32-%3EU)forallU-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="pack_index(indices):Int32-instance-method">
      <div class="signature">
        
        def <strong>pack_index</strong>(indices) : Int32

        <a class="method-permalink" href="#pack_index(indices):Int32-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Convert from n-dimensional indexing to a buffer location.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="reshape(new_shape)-instance-method">
      <div class="signature">
        
        def <strong>reshape</strong>(new_shape)

        <a class="method-permalink" href="#reshape(new_shape)-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="scalar?-instance-method">
      <div class="signature">
        
        def <strong>scalar?</strong>

        <a class="method-permalink" href="#scalar?-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Checks that the array is a 1-vector (a "zero-dimensional" NArray)</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="set(coord,value:T)-instance-method">
      <div class="signature">
        
        def <strong>set</strong>(coord, value : T)

        <a class="method-permalink" href="#set(coord,value:T)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>replaces all values in an indexed chunk with the given value.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="set(coord,value:NArray(T))-instance-method">
      <div class="signature">
        
        def <strong>set</strong>(coord, value : <a href="../Lattice/NArray.html">NArray</a>(T))

        <a class="method-permalink" href="#set(coord,value:NArray(T))-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>replaces an indexed chunk with a given chunk of the same shape.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="shape:Array(Int32)-instance-method">
      <div class="signature">
        
        def <strong>shape</strong> : Array(Int32)

        <a class="method-permalink" href="#shape:Array(Int32)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Returns an array where <code>shape[i]</code> is the size of the NArray in the <code>i</code>th dimension.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="to_a:Array(T)-instance-method">
      <div class="signature">
        
        def <strong>to_a</strong> : Array(T)

        <a class="method-permalink" href="#to_a:Array(T)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
            <div class="doc-inherited">
              Description copied from module Enumerable(T)
            </div>
          
          <p>Returns an <code>Array</code> with all the elements in the collection.</p>

<pre><code>(<span class="n">1</span>..<span class="n">5</span>).to_a <span class="c"># =&gt; [1, 2, 3, 4, 5]</span></code></pre>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="to_s:String-instance-method">
      <div class="signature">
        
        def <strong>to_s</strong> : String

        <a class="method-permalink" href="#to_s:String-instance-method">#</a>
      </div>
      
        <div class="doc">
          
            <div class="doc-inherited">
              Description copied from class Object
            </div>
          
          <p>Returns a string representation of this object.</p>

<p>Descendants must usually <strong>not</strong> override this method. Instead,
they must override <code><a href="../Lattice/NArray.html#to_s(io:IO)-instance-method">#to_s(io)</a></code>, which must append to the given
IO object.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="to_s(io:IO)-instance-method">
      <div class="signature">
        
        def <strong>to_s</strong>(io : IO)

        <a class="method-permalink" href="#to_s(io:IO)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Override for printing a string output to stream (e.g., puts)</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="to_scalar:T-instance-method">
      <div class="signature">
        
        def <strong>to_scalar</strong> : T

        <a class="method-permalink" href="#to_scalar:T-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Maps a zero-dimensional NArray to the element it contains.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="to_tensor:Tensor(T)-instance-method">
      <div class="signature">
        
        def <strong>to_tensor</strong> : Tensor(T)

        <a class="method-permalink" href="#to_tensor:Tensor(T)-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="unpack_index(index):Array(Int32)-instance-method">
      <div class="signature">
        
        def <strong>unpack_index</strong>(index) : Array(Int32)

        <a class="method-permalink" href="#unpack_index(index):Array(Int32)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Convert from a buffer location to an n-dimensional indexing</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="valid_index?(indices)-instance-method">
      <div class="signature">
        
        def <strong>valid_index?</strong>(indices)

        <a class="method-permalink" href="#valid_index?(indices)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Checks if a given list of integers represent an index that is in range for this <code><a href="../Lattice/NArray.html">NArray</a></code>.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  



  <h2>
    <a id="macro-detail" class="anchor" href="#macro-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Macro Detail
  </h2>
  
    <div class="entry-detail" id="method_missing(call)-macro">
      <div class="signature">
        
        macro <strong>method_missing</strong>(call)

        <a class="method-permalink" href="#method_missing(call)-macro">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  


</div>

</body>
</html>
